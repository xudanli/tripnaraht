#!/bin/bash
# å¿«é€Ÿæµ‹è¯• Agent Routerï¼ˆæ— éœ€æ•°æ®åº“ï¼‰

echo "ğŸš€ Agent Router å¿«é€Ÿæµ‹è¯•"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

# æµ‹è¯• Router é€»è¾‘ï¼ˆæ— éœ€æœåŠ¡è¿è¡Œï¼‰
echo "ğŸ“‹ æµ‹è¯• 1: Router é€»è¾‘æµ‹è¯•ï¼ˆæ— éœ€æœåŠ¡ï¼‰"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
npx ts-node --project tsconfig.backend.json scripts/test-agent-router.ts

echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

# æ£€æŸ¥æœåŠ¡æ˜¯å¦è¿è¡Œ
echo "ğŸ“‹ æµ‹è¯• 2: æ£€æŸ¥æœåŠ¡çŠ¶æ€"
echo "â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€"
if curl -s http://localhost:3000/system/health > /dev/null 2>&1; then
    echo "âœ… æœåŠ¡æ­£åœ¨è¿è¡Œ"
    echo ""
    echo "å¯ä»¥è¿è¡Œç«¯åˆ°ç«¯æµ‹è¯•:"
    echo "  npx ts-node --project tsconfig.backend.json scripts/test-agent.ts"
else
    echo "âš ï¸  æœåŠ¡æœªè¿è¡Œ"
    echo ""
    echo "è¦å¯åŠ¨æœåŠ¡ï¼ˆæ— æ•°æ®åº“æ¨¡å¼ï¼‰:"
    echo "  export ALLOW_NO_DATABASE=true"
    echo "  npm run backend:dev"
    echo ""
    echo "æˆ–è€…é…ç½®æœ¬åœ°æ•°æ®åº“:"
    echo "  export DATABASE_URL='postgresql://user:password@localhost:5432/tripnara'"
    echo "  npm run backend:dev"
fi

echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "ğŸ“š æ›´å¤šä¿¡æ¯è¯·æŸ¥çœ‹: docs/AGENT-TESTING-WITHOUT-DB.md"

